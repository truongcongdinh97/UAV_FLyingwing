# Flying Wing UAV - Raspberry Pi 3B+ Optimized Requirements
# Tối ưu hóa cho hiệu suất và tương thích với RPi 3B+

# =============================================================================
# CORE - BẮT BUỘC CHO HOẠT ĐỘNG CƠ BẢN
# =============================================================================

# Numerical & Image Processing
numpy==1.21.6              # Version ổn định cho RPi, tránh memory issues
opencv-python==4.5.5.64    # Version nhẹ, tương thích tốt với RPi 3B+
Pillow==9.5.0              # Image processing
pyyaml==6.0                # Configuration

# Logging & Utilities
loguru==0.7.2              # Structured logging - tiêu thụ ít CPU

# MAVLink Communication
pymavlink==2.4.37          # MAVLink protocol - giao tiếp với ArduPilot

# AI Inference - QUAN TRỌNG: Dùng TensorFlow Lite thay vì TensorFlow full
# TensorFlow Lite runtime nhẹ hơn 10x so với TensorFlow full
tflite-runtime==2.13.0     # TensorFlow Lite - CHỈ CẦN CHO INFERENCE

# =============================================================================
# RASPBERRY PI HARDWARE - CHO CAMERA VÀ GPIO
# =============================================================================

# Camera Interface - BẮT BUỘC cho Pi Camera
picamera2==0.3.7           # Raspberry Pi Camera interface

# GPIO & I2C
RPi.GPIO==0.7.1            # GPIO control
smbus2==0.4.3              # I2C communication

# =============================================================================
# OPTIONAL - CHO PHÁT TRIỂN VÀ NGHIÊN CỨU
# =============================================================================

# Quantum Computing Research (CÓ THỂ BỎ QUA nếu không dùng)
qiskit==0.44.1             # Quantum computing
qiskit-aer==0.12.2         # Quantum simulator

# Testing & Development
pytest==7.4.3              # Testing
matplotlib==3.7.2          # Plotting (có thể nặng cho RPi)

# =============================================================================
# INSTALLATION GUIDE CHO RASPBERRY PI 3B+
# =============================================================================

# Bước 1: Cập nhật hệ thống
# sudo apt update && sudo apt upgrade -y

# Bước 2: Cài đặt Python dependencies từ system packages
# sudo apt install python3-pip python3-venv python3-opencv python3-numpy

# Bước 3: Tạo virtual environment
# python3 -m venv uav_env
# source uav_env/bin/activate

# Bước 4: Cài đặt requirements
# pip install -r requirements_rpi_optimized.txt

# Bước 5: Cài đặt TensorFlow Lite runtime (nếu có vấn đề)
# pip install https://github.com/google-coral/pycoral/releases/download/v2.0.0/tflite_runtime-2.5.0-cp39-cp39-linux_armv7l.whl

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# Nếu gặp lỗi memory trên RPi 3B+:
# 1. Tăng swap space: sudo dphys-swapfile swapoff && sudo dphys-swapfile set 2048 && sudo dphys-swapfile setup && sudo dphys-swapfile swapon
# 2. Sử dụng zram: sudo apt install zram-config

# Nếu gặp lỗi với OpenCV:
# pip install opencv-python-headless==4.5.5.64  # Version nhẹ hơn

# Nếu gặp lỗi với TensorFlow Lite:
# Thử cài đặt từ pre-built wheel cho armv7l

# =============================================================================
# PERFORMANCE TIPS
# =============================================================================

# Giảm resolution camera: 640x480 thay vì 1080p
# Sử dụng detection interval: detect mỗi 5-15 frames
# Tắt unnecessary services: sudo systemctl disable bluetooth
# Overclock nhẹ: arm_freq=1300, over_voltage=2 trong /boot/config.txt

# =============================================================================
# MEMORY USAGE ESTIMATES
# =============================================================================

# OpenCV: ~50MB
# NumPy: ~30MB  
# TensorFlow Lite: ~20MB
# MAVLink: ~10MB
# Application: ~100MB
# TOTAL: ~210MB - Phù hợp với RPi 3B+ (1GB RAM)